<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS System - SPA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        section {
            display: none;
            padding: 50px;
        }
        .card {
            margin-top: 20px;
        }
        table {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark px-5">
    <a class="navbar-brand" href="#">POS System</a>
    <div class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
            <li class="nav-item"><button class="btn btn-outline-light mx-2" id="nav-home">Dashboard</button></li>
            <li class="nav-item"><button class="btn btn-outline-light mx-2" id="nav-customer">Customers</button></li>
            <li class="nav-item"><button class="btn btn-outline-light mx-2" id="nav-item">Items</button></li>
            <li class="nav-item"><button class="btn btn-outline-light mx-2" id="nav-order">Orders</button></li>
            <li class="nav-item"><button class="btn btn-outline-light mx-2" id="nav-checkout">Checkout</button></li>
        </ul>
    </div>
</nav>

<section id="home"><h1>Dashboard</h1></section>

<section id="customer">
    <h1>Customer Management</h1>
    <input type="text" id="customer-name" placeholder="Customer Name" class="form-control">
    <button id="add-customer" class="btn btn-primary mt-2">Add Customer</button>
    <table class="table"><thead><tr><th>Name</th><th>Actions</th></tr></thead><tbody id="customer-list"></tbody></table>
</section>

<section id="item">
    <h1>Item Management</h1>
    <input type="text" id="item-name" placeholder="Item Name" class="form-control">
    <input type="number" id="item-price" placeholder="Price" class="form-control mt-2">
    <button id="add-item" class="btn btn-primary mt-2">Add Item</button>
    <table class="table"><thead><tr><th>Name</th><th>Price</th><th>Actions</th></tr></thead><tbody id="item-list"></tbody></table>
</section>

<section id="order">
    <h1>Order Management</h1>
    <input type="text" id="order-customer" placeholder="Customer Name" class="form-control">
    <input type="text" id="order-item" placeholder="Item Name" class="form-control mt-2">
    <input type="number" id="order-qty" placeholder="Quantity" class="form-control mt-2">
    <button id="add-order" class="btn btn-primary mt-2">Add Order</button>
    <table class="table"><thead><tr><th>Customer</th><th>Item</th><th>Qty</th><th>Actions</th></tr></thead><tbody id="order-list"></tbody></table>
</section>

<section id="checkout">
    <h1>Checkout</h1>
    <div id="checkout-summary"></div>
    <button class="btn btn-success mt-2" id="complete-checkout">Complete Purchase</button>
</section>

<script>
    function showSection(id) {
        $('section').hide();
        $('#' + id).show();
        localStorage.setItem('lastPage', id);
    }

    $(document).ready(function () {
        const last = localStorage.getItem('lastPage') || 'home';
        showSection(last);

        $('#nav-home').click(() => showSection('home'));
        $('#nav-customer').click(() => showSection('customer'));
        $('#nav-item').click(() => showSection('item'));
        $('#nav-order').click(() => showSection('order'));
        $('#nav-checkout').click(() => {
            showSection('checkout');
            updateCheckout();
        });

        $('#add-customer').click(function () {
            const name = $('#customer-name').val();
            if (name) {
                $('#customer-list').append(`<tr><td><input class='form-control' value='${name}'/></td><td><button class='btn btn-sm btn-danger delete'>Delete</button></td></tr>`);
                $('#customer-name').val('');
            }
        });

        $('#add-item').click(function () {
            const name = $('#item-name').val();
            const price = $('#item-price').val();
            if (name && price) {
                $('#item-list').append(`<tr><td><input class='form-control' value='${name}'/></td><td><input class='form-control' value='${price}'/></td><td><button class='btn btn-sm btn-danger delete'>Delete</button></td></tr>`);
                $('#item-name').val('');
                $('#item-price').val('');
            }
        });

        $('#add-order').click(function () {
            const customer = $('#order-customer').val();
            const item = $('#order-item').val();
            const qty = $('#order-qty').val();
            if (customer && item && qty) {
                $('#order-list').append(`<tr><td><input class='form-control' value='${customer}'/></td><td><input class='form-control' value='${item}'/></td><td><input class='form-control' type='number' value='${qty}'/></td><td><button class='btn btn-sm btn-danger delete'>Delete</button></td></tr>`);
                $('#order-customer').val('');
                $('#order-item').val('');
                $('#order-qty').val('');
            }
        });

        $(document).on('click', '.delete', function () {
            $(this).closest('tr').remove();
        });

        $('#complete-checkout').click(function () {
            alert('Checkout Complete');
            $('#order-list').empty();
            $('#checkout-summary').empty();
        });

        function updateCheckout() {
            let summary = '<ul>';
            $('#order-list tr').each(function () {
                const customer = $(this).find('td').eq(0).find('input').val();
                const item = $(this).find('td').eq(1).find('input').val();
                const qty = $(this).find('td').eq(2).find('input').val();
                summary += `<li>${customer} ordered ${qty} of ${item}</li>`;
            });
            summary += '</ul>';
            $('#checkout-summary').html(summary);
        }
    });
</script>

</body>
</html>
